{"ast":null,"code":"import _slicedToArray from \"D:/Projects/Work in progress/social-media-app-master/social-media-app-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { useState, useCallback, useEffect } from 'react';\nimport { useWindowEvent } from '../use-window-event/use-window-event.js';\nfunction serializeJSON(value) {\n  try {\n    return JSON.stringify(value);\n  } catch (error) {\n    throw new Error(\"@mantine/hooks use-local-storage: Failed to serialize the value\");\n  }\n}\nfunction deserializeJSON(value) {\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    return value;\n  }\n}\nfunction useLocalStorage(_ref) {\n  var key = _ref.key,\n    _ref$defaultValue = _ref.defaultValue,\n    defaultValue = _ref$defaultValue === void 0 ? void 0 : _ref$defaultValue,\n    _ref$getInitialValueI = _ref.getInitialValueInEffect,\n    getInitialValueInEffect = _ref$getInitialValueI === void 0 ? false : _ref$getInitialValueI,\n    _ref$deserialize = _ref.deserialize,\n    deserialize = _ref$deserialize === void 0 ? deserializeJSON : _ref$deserialize,\n    _ref$serialize = _ref.serialize,\n    serialize = _ref$serialize === void 0 ? serializeJSON : _ref$serialize;\n  var _a;\n  var _useState = useState(typeof window !== \"undefined\" && \"localStorage\" in window && !getInitialValueInEffect ? deserialize((_a = window.localStorage.getItem(key)) != null ? _a : void 0) : defaultValue != null ? defaultValue : \"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var setLocalStorageValue = useCallback(function (val) {\n    if (val instanceof Function) {\n      setValue(function (current) {\n        var result = val(current);\n        window.localStorage.setItem(key, serialize(result));\n        window.dispatchEvent(new CustomEvent(\"mantine-local-storage\", {\n          detail: val(current)\n        }));\n        return result;\n      });\n    } else {\n      window.localStorage.setItem(key, serialize(val));\n      window.dispatchEvent(new CustomEvent(\"mantine-local-storage\", {\n        detail: val\n      }));\n      setValue(val);\n    }\n  }, [key]);\n  useWindowEvent(\"storage\", function (event) {\n    var _a2;\n    if (event.storageArea === window.localStorage && event.key === key) {\n      setValue(deserialize((_a2 = event.newValue) != null ? _a2 : void 0));\n    }\n  });\n  useWindowEvent(\"mantine-local-storage\", function (event) {\n    setValue(event.detail);\n  });\n  useEffect(function () {\n    if (defaultValue !== void 0 && value === void 0) {\n      setLocalStorageValue(defaultValue);\n    }\n  }, [defaultValue, value, setLocalStorageValue]);\n  useEffect(function () {\n    var _a2;\n    if (getInitialValueInEffect) {\n      setValue(deserialize((_a2 = window.localStorage.getItem(key)) != null ? _a2 : void 0) || (defaultValue != null ? defaultValue : \"\"));\n    }\n  }, []);\n  return [value === void 0 ? defaultValue : value, setLocalStorageValue];\n}\nvar useLocalStorageValue = useLocalStorage;\nexport { useLocalStorage, useLocalStorageValue };","map":{"version":3,"names":["serializeJSON","value","JSON","stringify","error","Error","deserializeJSON","parse","e","useLocalStorage","_ref","key","_ref$defaultValue","defaultValue","_ref$getInitialValueI","getInitialValueInEffect","_ref$deserialize","deserialize","_ref$serialize","serialize","_a","_useState","useState","window","localStorage","getItem","_useState2","_slicedToArray","setValue","setLocalStorageValue","useCallback","val","Function","current","result","setItem","dispatchEvent","CustomEvent","detail","useWindowEvent","event","_a2","storageArea","newValue","useEffect","useLocalStorageValue"],"sources":["D:\\Projects\\Work in progress\\social-media-app-master\\social-media-app-master\\node_modules\\@mantine\\hooks\\src\\use-local-storage\\use-local-storage.ts"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\nimport { useWindowEvent } from '../use-window-event/use-window-event';\n\ninterface UseLocalStorage<T> {\n  /** Local storage key */\n  key: string;\n\n  /** Default value that will be set if value is not found in local storage */\n  defaultValue?: T;\n\n  /** If set to true, value will be update is useEffect after mount */\n  getInitialValueInEffect?: boolean;\n\n  /** Function to serialize value into string to be save in local storage */\n  serialize?(value: T): string;\n\n  /** Function to deserialize string value from local storage to value */\n  deserialize?(value: string): T;\n}\n\nfunction serializeJSON<T>(value: T) {\n  try {\n    return JSON.stringify(value);\n  } catch (error) {\n    throw new Error('@mantine/hooks use-local-storage: Failed to serialize the value');\n  }\n}\n\nfunction deserializeJSON(value: string) {\n  try {\n    return JSON.parse(value);\n  } catch {\n    return value;\n  }\n}\n\nexport function useLocalStorage<T = string>({\n  key,\n  defaultValue = undefined,\n  getInitialValueInEffect = false,\n  deserialize = deserializeJSON,\n  serialize = serializeJSON,\n}: UseLocalStorage<T>) {\n  const [value, setValue] = useState<T>(\n    typeof window !== 'undefined' && 'localStorage' in window && !getInitialValueInEffect\n      ? deserialize(window.localStorage.getItem(key) ?? undefined)\n      : ((defaultValue ?? '') as T)\n  );\n\n  const setLocalStorageValue = useCallback(\n    (val: T | ((prevState: T) => T)) => {\n      if (val instanceof Function) {\n        setValue((current) => {\n          const result = val(current);\n          window.localStorage.setItem(key, serialize(result));\n          window.dispatchEvent(new CustomEvent('mantine-local-storage', { detail: val(current) }));\n          return result;\n        });\n      } else {\n        window.localStorage.setItem(key, serialize(val));\n        window.dispatchEvent(new CustomEvent('mantine-local-storage', { detail: val }));\n        setValue(val);\n      }\n    },\n    [key]\n  );\n\n  useWindowEvent('storage', (event) => {\n    if (event.storageArea === window.localStorage && event.key === key) {\n      setValue(deserialize(event.newValue ?? undefined));\n    }\n  });\n\n  useWindowEvent('mantine-local-storage', (event) => {\n    setValue(event.detail);\n  });\n\n  useEffect(() => {\n    if (defaultValue !== undefined && value === undefined) {\n      setLocalStorageValue(defaultValue);\n    }\n  }, [defaultValue, value, setLocalStorageValue]);\n\n  useEffect(() => {\n    if (getInitialValueInEffect) {\n      setValue(\n        deserialize(window.localStorage.getItem(key) ?? undefined) || ((defaultValue ?? '') as T)\n      );\n    }\n  }, []);\n\n  return [value === undefined ? defaultValue : value, setLocalStorageValue] as const;\n}\n\nexport const useLocalStorageValue = useLocalStorage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}